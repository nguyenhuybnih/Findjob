
<!doctype html>
<html lang="en" xmlns:th="http://www.w3.org/1999/xhtml">
<head th:replace="~{/user/fragments/head :: head(pageTitle='Danh sách các công việc')}">

</head>
<body id="top">

<div id="overlayer"></div>
<div class="loader">
    <div class="spinner-border text-primary" role="status">
        <span class="sr-only">Loading...</span>
    </div>
</div>


<div class="site-wrap">

    <div class="site-mobile-menu site-navbar-target">
        <div class="site-mobile-menu-header">
            <div class="site-mobile-menu-close mt-3">
                <span class="icon-close2 js-menu-toggle"></span>
            </div>
        </div>
        <div class="site-mobile-menu-body"></div>
    </div> <!-- .site-mobile-menu -->


    <!-- NAVBAR -->
    <div th:replace="~{/user/fragments/navbar :: navbar}"> </div>

    <!-- HOME -->
    <section class="section-hero home-section overlay inner-page bg-image" style="background-image: url('/assets1/images/hero_1.jpg');" id="home-section">

        <div class="container">
            <div class="row align-items-center justify-content-center">
                <div class="col-md-12">
                    <div class="mb-5 text-center">
                        <h1 class="text-white font-weight-bold">The Easiest Way To Get Your Dream Job</h1>
                        <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Cupiditate, quas fugit ex!</p>
                    </div>
                    <form method="post" class="search-jobs-form">
                        <div class="row mb-5">
                            <div class="col-12 col-sm-6 col-md-6 col-lg-3 mb-4 mb-lg-0">
                                <input type="text" class="form-control form-control-lg" placeholder="Job title, Company...">
                            </div>
                            <div class="col-12 col-sm-6 col-md-6 col-lg-3 mb-4 mb-lg-0">
                                <select class="selectpicker" data-style="btn-white btn-lg" data-width="100%" data-live-search="true" title="Select Region">
                                    <option>Anywhere</option>
                                    <option>San Francisco</option>
                                    <option>Palo Alto</option>
                                    <option>New York</option>
                                    <option>Manhattan</option>
                                    <option>Ontario</option>
                                    <option>Toronto</option>
                                    <option>Kansas</option>
                                    <option>Mountain View</option>
                                </select>
                            </div>
                            <div class="col-12 col-sm-6 col-md-6 col-lg-3 mb-4 mb-lg-0">
                                <select class="selectpicker" data-style="btn-white btn-lg" data-width="100%" data-live-search="true" title="Select Job Type">
                                    <option>Part Time</option>
                                    <option>Full Time</option>
                                </select>
                            </div>
                            <div class="col-12 col-sm-6 col-md-6 col-lg-3 mb-4 mb-lg-0">
                                <button type="submit" class="btn btn-primary btn-lg btn-block text-white btn-search"><span class="icon-search icon mr-2"></span>Search Job</button>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-12 popular-keywords">
                                <h3>Trending Keywords:</h3>
                                <ul class="keywords list-unstyled m-0 p-0">
                                    <li><a href="#" class="">UI Designer</a></li>
                                    <li><a href="#" class="">Python</a></li>
                                    <li><a href="#" class="">Developer</a></li>
                                </ul>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>

        <a href="#next" class="scroll-button smoothscroll">
            <span class=" icon-keyboard_arrow_down"></span>
        </a>
    </section>


    <section class="site-section" id="next">
        <div class="container">

            <div class="row mb-5 justify-content-center">
                <div class="col-md-7 text-center">
                    <h2 class="section-title mb-2">Tìm kiếm việc làm theo loại nghề</h2>
                    <form >
                        <div class="form-group">
                            <label class="font-weight-semibold" for="branch">Ngành nghề </label>
                            <select class="form-control" id="branch" >

                            </select>
                        </div>
                        <button type="submit" class="btn btn-primary mt-3">Tìm kiếm</button>
                    </form>
                </div>
            </div>


            <ul class="job-listings mb-5" id="job-list">




            </ul>

            <div class="row pagination-wrap">
                <div class="col-md-6 text-center text-md-left mb-4 mb-md-0">
                    <span>Showing 1-7 Of 43,167 Jobs</span>
                </div>
                <div class="col-md-6 text-center text-md-right">
                    <div class="custom-pagination ml-auto">
                        <a href="#" class="prev">Prev</a>
                        <div class="d-inline-block">
                            <a href="#" class="active">1</a>
                            <a href="#">2</a>
                            <a href="#">3</a>
                            <a href="#">4</a>
                        </div>
                        <a href="#" class="next">Next</a>
                    </div>
                </div>
            </div>

        </div>
    </section>

    <section class="py-5 bg-image overlay-primary fixed overlay" style="background-image: url('/assets1/images/hero_1.jpg');">
        <div class="container">
            <div class="row align-items-center">
                <div class="col-md-8">
                    <h2 class="text-white">Looking For A Job?</h2>
                    <p class="mb-0 text-white lead">Lorem ipsum dolor sit amet consectetur adipisicing elit tempora adipisci impedit.</p>
                </div>
                <div class="col-md-3 ml-auto">
                    <a href="#" class="btn btn-warning btn-block btn-lg">Sign Up</a>
                </div>
            </div>
        </div>
    </section>



    <footer th:replace="~{/user/fragments/footer :: footer}"></footer>

</div>

<!-- SCRIPTS -->
<div th:replace="~{/user/fragments/script :: script}"></div>
<script >

    document.addEventListener("DOMContentLoaded", function () {
    // Sử dụng axios để lấy dữ liệu công việc từ API
    axios.get('/admin/Jobs/data')
        .then(response => {
            const jobList = document.getElementById("job-list");

            // Duyệt qua từng công việc và tạo nội dung HTML
            response.data.forEach(job => {
                const jobItem = `
                    <li class="job-listing d-block d-sm-flex pb-3 pb-sm-0 align-items-center">
                        <a href=""></a>
                        <div class="job-listing-logo">
                            <img src="${job.employersq.employerAvatar}" alt="loi anh" class="img-fluid"
                                style="width: 100%; height: auto; object-fit: cover;">
                        </div>
                        <div class="job-listing-about d-sm-flex custom-width w-100 justify-content-between mx-4">
                            <div class="job-listing-position custom-width w-50 mb-3 mb-sm-0">
                                <h2>${job.jobName}</h2>
                                <strong>${job.employersq.employerName}</strong>
                            </div>
                            <div class="job-listing-location mb-3 mb-sm-0 custom-width w-25">
                                <span class="icon-room"></span> ${job.jobAddress}
                            </div>

                        </div>
                    </li>
                `;
                jobList.insertAdjacentHTML('beforeend', jobItem);
            });
        })
        .catch(error => {
            console.error("Error fetching job data:", error);
        });
});

    document.addEventListener("DOMContentLoaded", function() {
           fetch('/admin/Branch/data') // API để lấy danh sách quyền
                .then(response => response.json())
                .then(data => {
                    let branchropdown = document.getElementById('branch');
                    data.forEach(branch => {
                        let option = document.createElement('option');
                        option.value = branch.branchId; // Giá trị là roleId
                        option.text = branch.branchName; // Tên quyền
                        branchropdown.appendChild(option);
                    });

                })
                .catch(error => {
                    console.error('Error fetching branch:', error);
                });
           });
</script>

</body>
</html>